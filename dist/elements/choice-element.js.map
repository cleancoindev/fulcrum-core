{"version":3,"sources":["../../src/elements/choice-element.js"],"names":[],"mappings":"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","file":"choice-element.js","sourcesContent":["import Element from './element';\nimport ElementFactory from './element-factory';\nimport Choice from './choice';\n\nexport default class ChoiceElement extends Element {\n  constructor(parent, attributes) {\n    super(parent, attributes);\n\n    this.multiple = !!attributes.multiple;\n    this.allowOther = !!attributes.allow_other;\n    this.choiceFilter = null;\n    this.overrideChoices = null;\n\n    this._choiceListID = attributes.choice_list_id;\n    this._choices = [];\n\n    if (this._choiceListID) {\n      this.choiceList = ElementFactory.getProvider().getChoiceList(this._choiceListID);\n      this._choices = this.choiceList.choices.slice();\n    } else {\n      for (let choice of attributes.choices) {\n        this._choices.push(new Choice(choice));\n      }\n    }\n  }\n\n  get isLengthValidationSupported() {\n    return this.multiple;\n  }\n\n  get choices() {\n    return this._overrideChoices ? this._overrideChoices : this.filteredChoices;\n  }\n\n  get filteredChoices() {\n    const items = this._choices;\n\n    if (!this.choiceFilter) {\n      return items;\n    }\n\n    const filteredItems = [];\n\n    for (let item of items) {\n      for (let filter of this.choiceFilter) {\n        if (item.value.toLowerCase().indexOf(filter.toLowerCase()) !== -1) {\n          filteredItems.push(item);\n        }\n      }\n    }\n\n    return filteredItems;\n  }\n\n  get overrideChoices() {\n    return this._overrideChoices;\n  }\n\n  set overrideChoices(overrideChoices) {\n    this._choicesByValue = null;\n\n    if (!overrideChoices || overrideChoices.length < 1) {\n      this._overrideChoices = null;\n      return;\n    }\n\n    const choices = [];\n\n    for (let choiceAttributes of overrideChoices) {\n      const choice = new Choice(choiceAttributes);\n\n      choices.push(choice);\n    }\n\n    this._overrideChoices = choices;\n  }\n\n  choiceByValue(value) {\n    if (!this._choicesByValue) {\n      this._choicesByValue = {};\n\n      for (let choice of this.choices) {\n        this._choicesByValue[choice.value] = choice;\n      }\n    }\n\n    return this._choicesByValue[value];\n  }\n}\n"]}