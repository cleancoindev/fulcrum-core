{"version":3,"sources":["../../src/elements/classification-element.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;;;;;;;;;;;;;IAEqB;;;AACnB,WADmB,qBACnB,CAAY,MAAZ,EAAoB,UAApB,EAAgC;0BADb,uBACa;;iDAC9B,oBAAM,MAAN,EAAc,UAAd,GAD8B;;AAG9B,UAAK,UAAL,GAAkB,CAAC,CAAC,WAAW,WAAX,CAHU;AAI9B,UAAK,YAAL,GAAoB,IAApB,CAJ8B;;AAM9B,UAAK,4BAAL,GAAoC,IAApC,CAN8B;;AAQ9B,UAAK,oBAAL,GAA4B,WAAW,qBAAX,CARE;;GAAhC;;AADmB,kCAYnB,qBAAK,YAAY,UAAU;;;AACzB,eAAW,oBAAX,CAAgC,KAAK,oBAAL,EAA2B,UAAC,GAAD,EAAM,iBAAN,EAA4B;AACrF,UAAI,GAAJ,EAAS;AACP,eAAO,SAAS,GAAT,CAAP,CADO;OAAT;;AAIA,aAAK,iBAAL,GAAyB,iBAAzB,CALqF;;AAOrF,aAAO,UAAP,CAPqF;KAA5B,CAA3D,CADyB;;;AAZR,kCAmDnB,2CAAiB;AACf,uBAAM,cAAN,YADe;;AAGf,SAAK,4BAAL,GAAoC,IAApC,CAHe;;;eAnDE;;wBAwBO;AACxB,aAAO,KAAK,4BAAL,GAAoC,KAAK,4BAAL,GAAoC,KAAK,uBAAL,CADvD;;;;sBAIM,gCAAgC;AAC9D,UAAI,CAAC,8BAAD,IAAmC,+BAA+B,MAA/B,GAAwC,CAAxC,EAA2C;AAChF,aAAK,4BAAL,GAAoC,IAApC,CADgF;AAEhF,eAFgF;OAAlF;;AAKA,UAAM,sBAAsB,EAAtB,CANwD;;AAQ9D,2BAAqC,4IAArC,IAAqE;;;;;;;;;;;;YAA5D,gCAA4D;;AACnE,YAAM,iBAAiB,6BAAmB,IAAnB,EAAyB,wBAAzB,CAAjB,CAD6D;;AAGnE,4BAAoB,IAApB,CAAyB,cAAzB,EAHmE;OAArE;;AAMA,WAAK,4BAAL,GAAoC,mBAApC,CAd8D;;;;wBAiB3C;AACnB,aAAO,OAAO,MAAP,CAAc,mBAAM,cAAN,EAAsB;AACzC,qCAA6B,KAAK,4BAAL;OADxB,CAAP,CADmB;;;;wBAYS;AAC5B,UAAM,QAAQ,KAAK,iBAAL,CAAuB,KAAvB,CADc;;AAG5B,UAAI,CAAC,KAAK,oBAAL,EAA2B;AAC9B,eAAO,KAAP,CAD8B;OAAhC;;AAIA,UAAM,gBAAgB,EAAhB,CAPsB;;AAS5B,4BAAiB,0HAAjB,IAAwB;;;;;;;;;;;;YAAf,aAAe;;AACtB,8BAAmB,KAAK,oBAAL,qHAAnB,IAA8C;;;;;;;;;;;;cAArC,eAAqC;;AAC5C,cAAI,KAAK,KAAL,CAAW,WAAX,GAAyB,OAAzB,CAAiC,OAAO,WAAP,EAAjC,MAA2D,CAAC,CAAD,EAAI;AACjE,0BAAc,IAAd,CAAmB,IAAnB,EADiE;WAAnE;SADF;OADF;;AAQA,aAAO,aAAP,CAjB4B;;;;SAzDX","file":"classification-element.js","sourcesContent":["import Element from './element';\nimport Classification from './classification';\n\nexport default class ClassificationElement extends Element {\n  constructor(parent, attributes) {\n    super(parent, attributes);\n\n    this.allowOther = !!attributes.allow_other;\n    this.choiceFilter = null;\n\n    this._overrideClassificationItems = null;\n\n    this._classificationSetID = attributes.classification_set_id;\n  }\n\n  load(dataSource, callback) {\n    dataSource.getClassificationSet(this._classificationSetID, (err, classificationSet) => {\n      if (err) {\n        return callback(err);\n      }\n\n      this.classificationSet = classificationSet;\n\n      return callback();\n    });\n  }\n\n  get classificationItems() {\n    return this._overrideClassificationItems ? this._overrideClassificationItems : this.filteredClassifications;\n  }\n\n  set overrideClassificationItems(overrideClassificationSetItems) {\n    if (!overrideClassificationSetItems || overrideClassificationSetItems.length < 1) {\n      this._overrideClassificationItems = null;\n      return;\n    }\n\n    const classificationItems = [];\n\n    for (let classificationAttributes of overrideClassificationSetItems) {\n      const classification = new Classification(null, classificationAttributes);\n\n      classificationItems.push(classification);\n    }\n\n    this._overrideClassificationItems = classificationItems;\n  }\n\n  get overrideValues() {\n    return Object.assign(super.overrideValues, {\n      overrideClassificationItems: this._overrideClassificationItems\n    });\n  }\n\n  resetOverrides() {\n    super.resetOverrides();\n\n    this._overrideClassificationItems = null;\n  }\n\n  get filteredClassifications() {\n    const items = this.classificationSet.items;\n\n    if (!this.classificationFilter) {\n      return items;\n    }\n\n    const filteredItems = [];\n\n    for (let item of items) {\n      for (let filter of this.classificationFilter) {\n        if (item.value.toLowerCase().indexOf(filter.toLowerCase()) !== -1) {\n          filteredItems.push(item);\n        }\n      }\n    }\n\n    return filteredItems;\n  }\n}\n"]}