{"version":3,"sources":["../src/form.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKqB;AACnB,WADmB,IACnB,CAAY,UAAZ,EAAwB;0BADL,MACK;;;AAEtB,SAAK,KAAL,GAAa,UAAb;;AAFsB,QAItB,CAAK,cAAL,GAAsB,WAAW,gBAAX,CAJA;AAKtB,SAAK,MAAL,GAAc,WAAW,MAAX,CALQ;AAMtB,SAAK,mBAAL,CAAyB,WAAW,QAAX,CAAzB,CANsB;;AAQtB,SAAK,gBAAL,GAAwB,WAAW,YAAX,CARF;AAStB,SAAK,YAAL,GAAoB,IAApB,CATsB;;AAWtB,SAAK,iBAAL,GAAyB,CAAC,CAAC,WAAW,iBAAX,CAXL;GAAxB;;eADmB;;;;4FAgBN;;;;;;;;;;4BAAW,KAAK,WAAL;;;;;;;;AAAX;;qBACL,QAAQ,IAAR;;;;;;uBACI,QAAQ,IAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAKC,YAAY;AACvB,UAAM,SAAS,qBAAW,UAAX,CAAT;;;AADiB,YAIvB,CAAO,KAAP,GAAe,IAAf,CAJuB;AAKvB,aAAO,eAAP,GAAyB,EAAzB,CALuB;;AAOvB,8BAAc,6BAAd,CAA4C,KAAK,QAAL,EACA,OAAO,UAAP,EACA,MAF5C,EAPuB;;AAWvB,aAAO,MAAP,CAXuB;;;;wBAqBrB,KAAK;AACP,aAAO,KAAK,aAAL,CAAmB,GAAnB,CAAP,CADO;;;;yBAIJ,UAAU;AACb,aAAO,KAAK,kBAAL,CAAwB,QAAxB,CAAP,CADa;;;;6BAQN;;AAEP,aAAO,KAAK,KAAL,CAFA;;;;wBAnBS;AAChB,UAAI,CAAC,KAAK,YAAL,EAAmB;AACtB,aAAK,YAAL,GAAoB,4BAAkB,IAAlB,EAAwB,KAAK,gBAAL,CAA5C,CADsB;OAAxB;AAGA,aAAO,KAAK,YAAL,CAJS;;;;wBAeI;AACpB,aAAO,KAAP,CADoB;;;;wBASG;AACvB,aAAO,KAAK,iBAAL,CADgB;;;;SA7DN;;;;;;AAkErB,wBAAc,WAAd,CAA0B,IAA1B","file":"form.js","sourcesContent":["import ChildElements from './elements/child-elements';\nimport StatusElement from './elements/status-element';\nimport DefaultValues from './values/default-values';\nimport Record from './record';\n\nexport default class Form {\n  constructor(attributes) {\n    // TODO(zhm) remove json attr\n    this._json = attributes;\n    // TODO(zhm) this might need to go away\n    this.titleFieldKeys = attributes.title_field_keys;\n    this.script = attributes.script;\n    this.createChildElements(attributes.elements);\n\n    this._statusFieldJSON = attributes.status_field;\n    this._statusField = null;\n\n    this._geometryRequired = !!attributes.geometry_required;\n  }\n\n  async load() {\n    for (const element of this.allElements) {\n      if (element.load) {\n        await element.load();\n      }\n    }\n  }\n\n  createRecord(attributes) {\n    const record = new Record(attributes);\n\n    // TODO(zhm) this might not be final\n    record._form = this;\n    record._formValuesJSON = {};\n\n    DefaultValues.applyDefaultValuesForElements(this.elements,\n                                                record.formValues,\n                                                record);\n\n    return record;\n  }\n\n  get statusField() {\n    if (!this._statusField) {\n      this._statusField = new StatusElement(this, this._statusFieldJSON);\n    }\n    return this._statusField;\n  }\n\n  get(key) {\n    return this.elementsByKey[key];\n  }\n\n  find(dataName) {\n    return this.elementsByDataName[dataName];\n  }\n\n  get hasHiddenParent() {\n    return false;\n  }\n\n  toJSON() {\n    // TODO(zhm) actually implement this so it returns a copy\n    return this._json;\n  }\n\n  get isGeometryRequired() {\n    return this._geometryRequired;\n  }\n}\n\nChildElements.includeInto(Form);\n"]}