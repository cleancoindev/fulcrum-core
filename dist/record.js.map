{"version":3,"sources":["../src/record.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAKe,MAAM,MAAN,2BAA6B;AAC1C,cAAY,UAAZ,EAAwB;AACtB;;;;;;;;AADsB,GAAxB;;AAWA,MAAI,EAAJ,GAAS;AACP,WAAO,KAAK,GAAL,CADA;GAAT;;AAIA,MAAI,EAAJ,CAAO,EAAP,EAAW;AACT,SAAK,GAAL,GAAW,EAAX,CADS;GAAX;;AAIA,MAAI,IAAJ,GAAW;AACT,WAAO,KAAK,KAAL,CADE;GAAX;;AAIA,MAAI,SAAJ,GAAgB;AACd,WAAO,KAAK,UAAL,CADO;GAAhB;;AAIA,MAAI,SAAJ,CAAc,SAAd,EAAyB;AACvB,SAAK,UAAL,GAAkB,SAAlB,CADuB;GAAzB;;AAIA,MAAI,SAAJ,GAAgB;AACd,WAAO,KAAK,UAAL,CADO;GAAhB;;AAIA,MAAI,SAAJ,CAAc,SAAd,EAAyB;AACvB,SAAK,UAAL,GAAkB,SAAlB,CADuB;GAAzB;;AAIA,MAAI,UAAJ,GAAiB;AACf,QAAI,KAAK,WAAL,IAAoB,IAApB,EAA0B;AAC5B,WAAK,WAAL,GAAmB,yBAAe,KAAK,KAAL,EAAY,KAAK,eAAL,CAA9C,CAD4B;KAA9B;;AAIA,WAAO,KAAK,WAAL,CALQ;GAAjB;;AAQA,MAAI,aAAJ,GAAoB;AAClB,WAAO,KAAK,SAAL,IAAkB,IAAlB,IAA0B,KAAK,UAAL,IAAmB,IAAnB,CADf;GAApB;;AAIA,WAAS;AACP,UAAM,OAAO,EAAP,CADC;;AAGP,SAAK,EAAL,GAAU,KAAK,EAAL,CAHH;AAIP,SAAK,iBAAL,GAAyB,oBAAU,eAAV,CAA0B,KAAK,SAAL,CAAnD,CAJO;AAKP,SAAK,iBAAL,GAAyB,oBAAU,eAAV,CAA0B,KAAK,SAAL,CAAnD,CALO;AAMP,SAAK,WAAL,GAAmB,KAAK,UAAL,CAAgB,MAAhB,EAAnB,CANO;AAOP,SAAK,QAAL,GAAgB,KAAK,SAAL,CAPT;AAQP,SAAK,SAAL,GAAiB,KAAK,UAAL,CARV;;AAUP,WAAO,IAAP,CAVO;GAAT;;AAaA,qBAAmB;AACjB,UAAM,MAAM,IAAI,IAAJ,EAAN,CADW;;AAGjB,QAAI,KAAK,UAAL,IAAmB,IAAnB,EAAyB;AAC3B,WAAK,SAAL,GAAiB,GAAjB,CAD2B;KAA7B;;AAIA,SAAK,SAAL,GAAiB,GAAjB,CAPiB;GAAnB;;AAUA,MAAI,iBAAJ,GAAwB;AACtB,WAAO,KAAK,IAAL,CAAU,iBAAV,CADe;GAAxB;;AAIA,MAAI,YAAJ,GAAmB;AACjB,UAAM,iBAAiB,KAAK,IAAL,CAAU,cAAV,CADN;AAEjB,UAAM,SAAS,EAAT,CAFW;;AAIjB,SAAK,IAAI,QAAJ,IAAgB,cAArB,EAAqC;AACnC,YAAM,QAAQ,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAAR,CAD6B;;AAGnC,UAAI,KAAJ,EAAW;AACT,cAAM,eAAe,MAAM,YAAN,CADZ;;AAGT,YAAI,oBAAU,SAAV,CAAoB,YAApB,CAAJ,EAAuC;AACrC,iBAAO,IAAP,CAAY,YAAZ,EADqC;SAAvC;OAHF;KAHF;;AAYA,WAAO,OAAO,IAAP,CAAY,IAAZ,CAAP,CAhBiB;GAAnB;CA/Ea;kBAAM","file":"record.js","sourcesContent":["import Feature from './feature';\nimport FormValues from './values/form-values';\nimport TextUtils from './utils/text-utils';\nimport DateUtils from './utils/date-utils';\n\nexport default class Record extends Feature {\n  constructor(attributes) {\n    super();\n\n    // this._id = attributes.id;\n    // this._createdAt = DateUtils.parseTimestamp(attributes.client_created_at);\n    // this._updatedAt = DateUtils.parseTimestamp(attributes.client_updated_at);\n    // this._formValuesJSON = attributes.form_values;\n    // this._latitude = attributes.latitude;\n    // this._longitude = attributes.longitude;\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  set id(id) {\n    this._id = id;\n  }\n\n  get form() {\n    return this._form;\n  }\n\n  get createdAt() {\n    return this._createdAt;\n  }\n\n  set createdAt(createdAt) {\n    this._createdAt = createdAt;\n  }\n\n  get updatedAt() {\n    return this._updatedAt;\n  }\n\n  set updatedAt(updatedAt) {\n    this._updatedAt = updatedAt;\n  }\n\n  get formValues() {\n    if (this._formValues == null) {\n      this._formValues = new FormValues(this._form, this._formValuesJSON);\n    }\n\n    return this._formValues;\n  }\n\n  get hasCoordinate() {\n    return this._latitude != null && this._longitude != null;\n  }\n\n  toJSON() {\n    const json = {};\n\n    json.id = this.id;\n    json.client_created_at = DateUtils.formatTimestamp(this.createdAt);\n    json.client_updated_at = DateUtils.formatTimestamp(this.updatedAt);\n    json.form_values = this.formValues.toJSON();\n    json.latitude = this._latitude;\n    json.longitude = this._longitude;\n\n    return json;\n  }\n\n  updateTimestamps() {\n    const now = new Date();\n\n    if (this._createdAt == null) {\n      this.createdAt = now;\n    }\n\n    this.updatedAt = now;\n  }\n\n  get isGeometryEnabled() {\n    return this.form.isGeometryEnabled;\n  }\n\n  get displayValue() {\n    const titleFieldKeys = this.form.titleFieldKeys;\n    const titles = [];\n\n    for (let fieldKey of titleFieldKeys) {\n      const value = this.formValues.get(fieldKey);\n\n      if (value) {\n        const displayValue = value.displayValue;\n\n        if (TextUtils.isPresent(displayValue)) {\n          titles.push(displayValue);\n        }\n      }\n    }\n\n    return titles.join(', ');\n  }\n}\n"]}