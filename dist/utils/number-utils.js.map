{"version":3,"sources":["../../src/utils/number-utils.js"],"names":["MachineFormatterOptions","style","useGrouping","minimumFractionDigits","maximumFractionDigits","intl","Intl","NumberUtils","parseDouble","input","number","isNaN","localizedStringFromMachineString","machineString","allowDecimals","localeDecimalFormatter","format","localeIntegerFormatter","formatMachine","formatWithFormatter","machineFormatter","formatCurrency","currency","__formatCurrency","Locale","supportsECMA402","options","currencyDisplay","formatter","global","NumberFormat","currentLocale","string","toString","_localeDecimalFormatter","_localeIntegerFormatter","_machineFormatter"],"mappings":"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","file":"number-utils.js","sourcesContent":["import Locale from './locale';\n\nconst MachineFormatterOptions = {\n  style: 'decimal',\n  useGrouping: false,\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 20\n};\n\nlet intl = null;\n\nif (typeof Intl !== 'undefined') {\n  /* eslint-disable no-undef */\n  intl = Intl;\n  /* eslint-enable no-undef */\n}\n\nexport default class NumberUtils {\n  static parseDouble(input) {\n    const number = +input;\n\n    if (number == null || isNaN(number)) {\n      return null;\n    }\n\n    return number;\n  }\n\n  static get localeDecimalFormatter() {\n    if (!this._localeDecimalFormatter && intl) {\n      this._localeDecimalFormatter = new intl.NumberFormat([], MachineFormatterOptions);\n    }\n\n    return this._localeDecimalFormatter;\n  }\n\n  static get localeIntegerFormatter() {\n    if (!this._localeIntegerFormatter && intl) {\n      this._localeIntegerFormatter = new intl.NumberFormat([], {useGrouping: false, maximumFractionDigits: 0});\n    }\n\n    return this._localeIntegerFormatter;\n  }\n\n  static get machineFormatter() {\n    if (!this._machineFormatter && intl) {\n      this._machineFormatter = new intl.NumberFormat([ 'en-US' ], MachineFormatterOptions);\n    }\n\n    return this._machineFormatter;\n  }\n\n  static localizedStringFromMachineString(machineString, allowDecimals = true) {\n    if (allowDecimals && NumberUtils.localeDecimalFormatter) {\n      return NumberUtils.localeDecimalFormatter.format(machineString);\n    } else if (NumberUtils.localeIntegerFormatter) {\n      return NumberUtils.localeIntegerFormatter.format(machineString);\n    }\n\n    return machineString;\n  }\n\n  static formatMachine(number) {\n    return NumberUtils.formatWithFormatter(NumberUtils.machineFormatter, number);\n  }\n\n  static formatCurrency(number, currency) {\n    if (number == null) {\n      return null;\n    }\n\n    return NumberUtils.__formatCurrency(number, currency);\n  }\n\n  static __formatCurrency(number, currency) {\n    if (!Locale.supportsECMA402()) {\n      return number;\n    }\n\n    const options = {\n      style: 'currency',\n      currency: currency,\n      currencyDisplay: 'symbol',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    };\n\n    const formatter = new global.Intl.NumberFormat(Locale.currentLocale(), options);\n\n    return formatter.format(number);\n  }\n\n  static formatWithFormatter(formatter, number) {\n    if (formatter != null) {\n      const string = formatter.format(number);\n\n      if (string === 'NaN') {\n        return number;\n      }\n\n      return string;\n    }\n\n    return number.toString();\n  }\n}\n"]}