{"version":3,"sources":["../../src/values/calculated-value.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAGe,MAAM,eAAe,gCAAsB;AACxD,aAAW,CAAC,OAAO,EAAE,KAAK,EAAE;AAC1B,SAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;;AAEtB,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC;GACnB;;AAED,MAAI,YAAY,GAAG;AACjB,QAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,aAAO,IAAI,CAAC,KAAK,CAAC;KACnB;;AAED,WAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;GACpD;;AAED,MAAI,QAAQ,GAAG;AACb,WAAO,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC;GAC3B;;AAED,MAAI,WAAW,GAAG;AAChB,UAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO;;;;;;AAAC,AAMrC,QAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,QAAQ,EAAE;AAC1C,aAAO,sBAAY,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAChD,MAAM,IAAI,OAAO,CAAC,MAAM,EAAE;AACzB,YAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,CAAC,SAAS,EAAC,UAAU,CAAC,CAAC,CAAC;;AAErD,UAAI,IAAI,EAAE;AACR,eAAO,IAAI,CAAC,OAAO,EAAE,CAAC;OACvB;KACF;;AAED,WAAO,IAAI,CAAC,SAAS,CAAC;GACvB;CACF;kBAtCoB,eAAe","file":"calculated-value.js","sourcesContent":["import TextualValue from './textual-value';\nimport NumberUtils from '../utils/number-utils';\n\nexport default class CalculatedValue extends TextualValue {\n  constructor(element, value) {\n    super(element, value);\n\n    this.error = null;\n  }\n\n  get displayValue() {\n    if (this.hasError) {\n      return this.error;\n    }\n\n    return this.element.display.format(this.textValue);\n  }\n\n  get hasError() {\n    return this.error != null;\n  }\n\n  get columnValue() {\n    const display = this.element.display;\n\n    // - for currency or number display, return the numeric value\n    // - for date calculations return the UTC epoch seconds\n    // - for text (and anything else) just return the string value\n\n    if (display.isCurrency || display.isNumber) {\n      return NumberUtils.parseDouble(this.textValue);\n    } else if (display.isDate) {\n      const date = new Date(`${this.textValue} 00:00:00Z`);\n\n      if (date) {\n        return date.getTime();\n      }\n    }\n\n    return this.textValue;\n  }\n}\n\n"]}