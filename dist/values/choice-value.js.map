{"version":3,"sources":["../../src/values/choice-value.js"],"names":[],"mappings":"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","file":"choice-value.js","sourcesContent":["import FormValue from './form-value';\nimport TextUtils from '../utils/text-utils';\nimport _ from 'lodash';\n\nconst ChoiceDisplaySeparator = ', ';\nconst ChoiceSearchSeparator = ' ';\n\nexport default class ChoiceValue extends FormValue {\n  constructor(element, attributes) {\n    super(element, attributes);\n\n    this._choiceValues = [];\n    this._otherValues = [];\n\n    if (attributes) {\n      if (attributes.choice_values) {\n        for (let choice of attributes.choice_values) {\n          if (TextUtils.isPresent(choice)) {\n            this._choiceValues.push(choice);\n          }\n        }\n      }\n\n      if (attributes.other_values) {\n        for (let choice of attributes.other_values) {\n          if (TextUtils.isPresent(choice)) {\n            this._otherValues.push(choice);\n          }\n        }\n      }\n    }\n  }\n\n  get isEmpty() {\n    if (this._choiceValues.length) {\n      return false;\n    }\n    if (this._otherValues.length) {\n      return false;\n    }\n    return true;\n  }\n\n  get displayValue() {\n    const labels = [];\n\n    for (let rawValue of this._choiceValues) {\n      const choice = this.element.choiceByValue(rawValue);\n\n      const label = (choice != null ? choice.label : rawValue);\n\n      if (TextUtils.isPresent(label)) {\n        labels.push(label);\n      }\n    }\n\n    for (let otherValue of this._otherValues) {\n      labels.push(otherValue);\n    }\n\n    return labels.join(ChoiceDisplaySeparator);\n  }\n\n  get searchableValue() {\n    const values = [];\n\n    for (let rawValue of this._choiceValues) {\n      const choice = this.element.choiceByValue(rawValue);\n\n      if (choice != null) {\n        values.push(choice.label);\n        values.push(choice.value);\n      } else {\n        values.push(rawValue);\n      }\n    }\n\n    for (let otherValue of this._otherValues) {\n      values.push(otherValue);\n    }\n\n    return values.join(ChoiceSearchSeparator);\n  }\n\n  get length() {\n    return this._choiceValues.length + this._otherValues.length;\n  }\n\n  toJSON() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    const choiceValues = [];\n    const otherValues = [];\n\n    for (let rawValue of this._choiceValues) {\n      choiceValues.push(rawValue);\n    }\n\n    for (let otherValue of this._otherValues) {\n      otherValues.push(otherValue);\n    }\n\n    return {\n      choice_values: choiceValues,\n      other_values: otherValues\n    };\n  }\n\n  get columnValue() {\n    const allValues = [];\n\n    for (let rawValue of this._choiceValues) {\n      allValues.push(rawValue);\n    }\n\n    for (let otherValue of this._otherValues) {\n      allValues.push(otherValue);\n    }\n\n    if (allValues.length === 0) {\n      return null;\n    }\n\n    if (!this.element.multiple) {\n      return allValues[0];\n    }\n\n    return '\\t' + allValues.join('\\t') + '\\t';\n  }\n\n  get multipleValues() {\n    return null;\n  }\n\n  get hasOtherValue() {\n    return this._otherValues.length !== 0;\n  }\n\n  get selectedValues() {\n    return this._choiceValues.slice();\n  }\n\n  set selectedValues(values) {\n    this._choiceValues = (values || []).slice();\n  }\n\n  get otherValues() {\n    return this._otherValues.slice();\n  }\n\n  set otherValues(values) {\n    this._otherValues = (values || []).slice();\n  }\n\n  get otherValue() {\n    if (!this.hasOtherValue) {\n      return null;\n    }\n\n    return this._otherValues[0];\n  }\n\n  isEqual(value) {\n    if (_.includes(this.selectedValues, value)) {\n      return true;\n    }\n\n    return this.otherValue === value;\n  }\n\n  contains(value) {\n    return this.isEqual(value);\n  }\n\n  startsWith(value) {\n    return this.contains(value);\n  }\n\n  // isLessThan(value) {\n  //   notImplemented();\n  // }\n\n  // isGreaterThan(value) {\n  //   notImplemented();\n  // }\n}\n"]}