{"version":3,"sources":["../../src/values/classification-value.js"],"names":[],"mappings":"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","file":"classification-value.js","sourcesContent":["import FormValue from './form-value';\nimport TextUtils from '../utils/text-utils';\n\nconst DisplaySeparator = ' â–¸ ';\n\nconst SearchSeparator = ' ';\n\nexport default class ClassificationValue extends FormValue {\n  constructor(element, attributes) {\n    super(element, attributes);\n\n    this._choiceValues = [];\n    this._otherValues = [];\n\n    for (let choice of attributes.choice_values) {\n      if (TextUtils.isPresent(choice)) {\n        this._choiceValues.push(choice);\n      }\n    }\n\n    for (let choice of attributes.other_values) {\n      if (TextUtils.isPresent(choice)) {\n        this._otherValues.push(choice);\n      }\n    }\n  }\n\n  get isEmpty() {\n    if (this._choiceValues.length) {\n      return false;\n    }\n\n    if (this._otherValues.length) {\n      return false;\n    }\n\n    return true;\n  }\n\n  get displayValue() {\n    const labels = [];\n    for (let rawValue of this._choiceValues) {\n      const classification = this.element.classificationByValue(rawValue);\n      const label = classification != null ? classification.label : rawValue;\n\n      if (TextUtils.isPresent(label)) {\n        labels.push(label);\n      }\n    }\n\n    for (let value of this._otherValues) {\n      labels.push(value);\n    }\n\n    return labels.join(DisplaySeparator);\n  }\n\n  get searchableValue() {\n    const values = [];\n    for (let rawValue of this._choiceValues) {\n      const classification = this.element.classificationByValue(rawValue);\n\n      if (classification != null) {\n        values.push(classification.label);\n        values.push(classification.value);\n      } else {\n        values.push(rawValue);\n      }\n    }\n\n    for (let value of this._otherValues) {\n      values.push(value);\n    }\n\n    return values.join(SearchSeparator);\n  }\n\n  get length() {\n    return this._choiceValues.length + this._otherValues.length;\n  }\n\n  toJSON() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const choiceValues = this._choiceValues.slice();\n    const otherValues = this._otherValues.slice();\n\n    return {\n      choice_values: choiceValues,\n      other_values: otherValues\n    };\n  }\n\n  columnValue() {\n    const allValues = [];\n\n    for (let value of this._choiceValues) {\n      allValues.push(value);\n    }\n\n    for (let value of this._otherValues) {\n      allValues.push(value);\n    }\n\n    if (allValues.length === 0) {\n      return null;\n    }\n\n    if (!this.element.multiple) {\n      return allValues[0];\n    }\n\n    return allValues.join('\\t');\n  }\n\n  get multipleValues() {\n    return null;\n  }\n\n  hasOtherValue() {\n    return this._otherValues.length !== 0;\n  }\n}\n"]}