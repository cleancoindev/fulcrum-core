{"version":3,"sources":["../../src/values/form-values.js"],"names":[],"mappings":"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","file":"form-values.js","sourcesContent":["import FormValueFactory from './form-value-factory';\nimport FormValue from './form-value';\n\nconst SearchValueSeparator = ' ';\n\nexport default class FormValues {\n  constructor(container, attributes) {\n    this._values = {};\n    this.container = container;\n    this.loadValues(container.elements, attributes);\n  }\n\n  get all() {\n    const result = [];\n\n    for (const key of Object.keys(this._values)) {\n      result.push(this._values[key]);\n    }\n\n    return result;\n  }\n\n  get(key) {\n    return this._values[key];\n  }\n\n  set(key, value) {\n    if (value && !(value instanceof FormValue)) {\n      throw new Error('Invalid value ' + value);\n    }\n\n    if (value != null) {\n      this._values[key] = value;\n    } else {\n      delete this._values[key];\n    }\n  }\n\n  find(dataName) {\n    const element = this.container.elementsByDataName[dataName];\n\n    if (element) {\n      return this.get(element.key);\n    }\n\n    return null;\n  }\n\n  loadValues(elements, attributes) {\n    for (let element of elements) {\n      this.loadValue(element, attributes);\n    }\n  }\n\n  loadValue(element, attributes) {\n    if (element.isSectionElement) {\n      this.loadValues(element.elements, attributes);\n    } else {\n      const rawValue = attributes[element.key];\n\n      if (rawValue != null) {\n        const formValue = FormValueFactory.create(element, rawValue);\n\n        this.set(element.key, formValue);\n      }\n    }\n  }\n\n  toJSON() {\n    const json = {};\n\n    for (let key of Object.keys(this._values)) {\n      const formValue = this._values[key];\n\n      if (formValue) {\n        const jsonValue = formValue.toJSON();\n\n        if (jsonValue) {\n          json[key] = jsonValue;\n        }\n      }\n    }\n\n    return json;\n  }\n\n  copy() {\n    return new FormValues(this.container, this.toJSON());\n  }\n\n  merge(formValues) {\n    if (!(formValues instanceof FormValues)) {\n      throw new Error('Invalid values');\n    }\n\n    for (let key of Object.keys(this._values)) {\n      const formValue = this._values[key];\n\n      this.set(key, formValue);\n    }\n  }\n\n  createValue(element, rawValue) {\n    return FormValueFactory.create(element, rawValue != null ? rawValue : null);\n  }\n\n  get searchableValue() {\n    const searchValues = [];\n\n    for (let key of Object.keys(this._values)) {\n      const formValue = this._values[key];\n\n      if (formValue) {\n        const searchValue = formValue.searchableValue;\n\n        if (searchValue != null) {\n          searchValues.push(searchValue);\n        }\n      }\n    }\n\n    return searchValues.join(SearchValueSeparator);\n  }\n}\n"]}