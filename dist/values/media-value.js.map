{"version":3,"sources":["../../src/values/media-value.js"],"names":[],"mappings":"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","file":"media-value.js","sourcesContent":["import FormValue from './form-value';\nimport MultipleValueItem from './multiple-value-item';\nimport TextUtils from '../utils/text-utils';\nimport NumberUtils from '../utils/number-utils';\n\nexport default class MediaValue extends FormValue {\n  constructor(element, items) {\n    super(element, items);\n\n    this._items = [];\n\n    if (items != null) {\n      for (let item of items) {\n        this._items.push(new this.ItemClass(this, item));\n      }\n    }\n  }\n\n  get isEmpty() {\n    return this._items.length === 0;\n  }\n\n  get searchableValue() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    const ids = [];\n\n    for (const item of this._items) {\n      if (TextUtils.isPresent(item.caption)) {\n        ids.push(item.caption);\n      }\n    }\n\n    return ids.join(' ');\n  }\n\n  get length() {\n    return this._items.length;\n  }\n\n  get columnValue() {\n    const ids = [];\n\n    for (let item of this._items) {\n      ids.push(item.mediaID);\n    }\n\n    return ids.join(',');\n  }\n\n  get multipleValues() {\n    const items = [];\n\n    for (let item of this._items) {\n      items.push(new MultipleValueItem(this.element, item.mediaID));\n    }\n\n    return items;\n  }\n\n  toJSON() {\n    if (this.isEmpty) {\n      return null;\n    }\n\n    const items = [];\n\n    for (let item of this._items) {\n      items.push(item.toJSON());\n    }\n\n    return items;\n  }\n\n  isEqual(value) {\n    return false;\n  }\n\n  contains(value) {\n    return false;\n  }\n\n  startsWith(value) {\n    return false;\n  }\n\n  isLessThan(value) {\n    return this.length < NumberUtils.parseDouble(value);\n  }\n\n  isGreaterThan(value) {\n    return this.length > NumberUtils.parseDouble(value);\n  }\n\n  mapItems(callback) {\n    return this._items.slice().map(callback);\n  }\n\n  addItem(id, caption) {\n    const item = new this.ItemClass(this, { caption: caption });\n\n    item.mediaID = id;\n\n    this._items.push(item);\n\n    return item;\n  }\n\n  removeItem(id) {\n    for (let index = 0; index < this._items.length; ++index) {\n      if (this._items[index].mediaID === id) {\n        const item = this._items[index];\n\n        this._items.splice(index, 1);\n\n        return item;\n      }\n    }\n\n    return null;\n  }\n\n  get hasCaptions() {\n    for (const item of this._items) {\n      if (TextUtils.isPresent(item.caption)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  // return a copy until it's determined that a mutable API is necessary\n  get items() {\n    return this._items.slice();\n  }\n}\n"]}